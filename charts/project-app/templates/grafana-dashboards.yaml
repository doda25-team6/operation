{{- if .Values.grafana.enabled }}
# Dashboard provisioning configuration
# This ConfigMap tells Grafana where to find dashboards and contains the dashboard JSON
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "project-app.fullname" . }}-grafana-dashboards
  labels:
    {{- include "project-app.labels" . | nindent 4 }}
data:
  # Provisioning config - tells Grafana to load dashboards from /var/lib/grafana/dashboards
  dashboards.yaml: |
    apiVersion: 1
    providers:
    - name: default
      folder: ''
      type: file
      options:
        path: /var/lib/grafana/dashboards
  # Application metrics dashboard - automatically loaded on startup
  application-metrics.json: |-
{{ .Files.Get "dashboards/application-metrics.json" | nindent 4 }}
{{- end }}
